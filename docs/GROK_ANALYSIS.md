# Анализ возможностей Grok (x.ai) для поиска новостей

## Обзор

Grok - это AI модель от xAI (компания Илона Маска), которая имеет встроенные возможности веб-поиска и доступа к реальному времени информации.

## Ключевые возможности для поиска новостей

### 1. Agent Tools API с веб-поиском

**Основная функция:** Grok имеет встроенный веб-поиск через Agent Tools API (заменил устаревший Live Search API с 15 декабря 2025).

**Возможности:**
- Автономный веб-поиск в реальном времени
- Анализ веб-страниц
- Интеграция актуальной информации в ответы
- Автоматическое решение о том, когда и как использовать поиск

**Инструменты:**
- `web_search` - поиск в интернете
- `x_search` - поиск в X (Twitter) для социальных медиа контента

### 2. Цитаты и источники

**Прозрачность:**
- Все цитаты доступны через `response.citations`
- Встроенные цитаты в формате Markdown через `inline_citations`
- Отслеживание источников для проверки

### 3. Доступные модели

**Для поиска новостей подходят:**

1. **Grok-4-1-fast-reasoning**
   - Контекстное окно: 2 млн токенов
   - Цена: $0.20 за 1M input токенов, $0.50 за 1M output токенов
   - Поддержка reasoning (рассуждений)

2. **Grok-4-fast-reasoning**
   - Контекстное окно: 2 млн токенов
   - Цена: $0.20 за 1M input токенов, $0.50 за 1M output токенов

3. **Grok-4**
   - Контекстное окно: 256K токенов
   - Цена: $3.00 за 1M input токенов, $15.00 за 1M output токенов
   - Более мощная модель

## Преимущества Grok для поиска новостей

### ✅ Встроенный веб-поиск
- Не требует дополнительных настроек или API ключей
- Автоматически решает, когда использовать поиск
- Может использовать несколько инструментов параллельно

### ✅ Реальное время
- Доступ к актуальной информации
- Поиск в X (Twitter) для социальных медиа новостей
- Интеграция live данных

### ✅ Цитаты и источники
- Автоматическое отслеживание источников
- Встроенные ссылки на источники
- Прозрачность данных

### ✅ Конкурентная цена
- Grok-4-1-fast: $0.20/$0.50 за 1M токенов (дешевле чем GPT-5.2: $1.75/$14)
- Большое контекстное окно (2M токенов)

## Сравнение с текущим решением (OpenAI GPT-5.2)

| Параметр | OpenAI GPT-5.2 | Grok-4-1-fast |
|----------|----------------|---------------|
| Веб-поиск | Responses API с `web_search` tool | Встроенный через Agent Tools API |
| Цена (input) | $1.75 за 1M токенов | $0.20 за 1M токенов |
| Цена (output) | $14 за 1M токенов | $0.50 за 1M токенов |
| Контекст | 400K токенов | 2M токенов |
| Социальные медиа | Нет | Да (X/Twitter через `x_search`) |
| Цитаты | Ограниченные | Встроенные с отслеживанием |

## Техническая реализация

### Python SDK

```python
from xai_sdk import Client
from xai_sdk.tools import web_search

# Инициализация клиента
client = Client(api_key="your-api-key")

# Создание чата с веб-поиском
chat = client.chat.create(
    model="grok-4-1-fast-reasoning",
    tools=[web_search()],
)

# Отправка запроса
response = chat.send_message("Найди новости на сайте ashrae.org за последние 2 недели")
print(response.text)
print(response.citations)  # Все источники
```

### Особенности API

1. **Автономное использование инструментов**
   - Grok сам решает, когда использовать веб-поиск
   - Может вызывать несколько инструментов параллельно
   - Итеративный процесс до получения финального ответа

2. **Формат ответа**
   - Текст с встроенными цитатами (если включено)
   - Отдельный список всех источников
   - Структурированные данные

## Потенциальные преимущества для нашего проекта

### 1. Экономия средств
- **В 8.75 раз дешевле** для input токенов ($0.20 vs $1.75)
- **В 28 раз дешевле** для output токенов ($0.50 vs $14)
- При обработке 137 источников экономия может быть значительной

### 2. Улучшенный поиск
- Встроенный веб-поиск (не требует Responses API)
- Поиск в социальных медиа (X/Twitter) для дополнительных источников
- Большее контекстное окно (2M vs 400K токенов)

### 3. Прозрачность
- Автоматические цитаты источников
- Отслеживание всех использованных источников
- Встроенные ссылки в ответе

## Потенциальные недостатки

### ⚠️ Новизна API
- Agent Tools API был введен только 15 декабря 2025
- Может быть меньше документации и примеров
- Возможны изменения в API

### ⚠️ Ограничения
- Может быть ограничения на количество запросов
- Неизвестны лимиты на использование веб-поиска
- Нужно получить API ключ от xAI

## Рекомендации

### Для тестирования:
1. Получить API ключ от xAI (console.x.ai)
2. Установить Python SDK: `pip install xai-grok`
3. Протестировать на нескольких источниках
4. Сравнить результаты с OpenAI GPT-5.2

### Для внедрения:
1. Создать альтернативный метод `_query_grok()` в `discovery_service.py`
2. Добавить настройки в `settings.py`:
   - `XAI_API_KEY`
   - `NEWS_DISCOVERY_GROK_MODEL` (например, `grok-4-1-fast-reasoning`)
3. Добавить возможность выбора модели (OpenAI или Grok)
4. Протестировать на всех 137 источниках

## Выводы

Grok представляет интересную альтернативу OpenAI GPT-5.2 для поиска новостей:

- ✅ **Значительно дешевле** (в 8-28 раз)
- ✅ **Встроенный веб-поиск** (не требует Responses API)
- ✅ **Дополнительные возможности** (поиск в X/Twitter)
- ✅ **Большее контекстное окно** (2M токенов)
- ⚠️ **Новизна API** (может быть менее стабильным)

**Рекомендация:** Стоит протестировать Grok на нескольких источниках для сравнения качества и стоимости с текущим решением на OpenAI.

## Ссылки

- [xAI API Documentation](https://docs.x.ai/docs/overview)
- [Agent Tools API](https://docs.x.ai/docs/guides/tools/search-tools)
- [Python SDK](https://pypi.org/project/xai-grok/)
- [Pricing](https://x.ai/api/)
