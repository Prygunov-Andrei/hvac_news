# Задание для фронтенда: Фильтрация и массовое удаление записей "новостей не найдено"

## Общая информация

В системе автоматического поиска новостей при отсутствии новостей в источнике создается запись-черновик с информацией об этом. Для удобства работы администратора добавлено поле `is_no_news_found`, которое позволяет легко идентифицировать и управлять такими записями.

## Цель задачи

Реализовать на фронтенде функционал для:
1. Визуального отображения записей "новостей не найдено"
2. Фильтрации таких записей в списке новостей
3. Массового удаления записей "новостей не найдено" после проверки администратором

## Технические детали API

### Поле в ответе API

В ответе API для каждой новости теперь присутствует поле:
- `is_no_news_found` (boolean) - `true` для записей "новостей не найдено", `false` для реальных новостей

### Эндпоинты для работы

**Базовый эндпоинт:** `/api/news/`

**Фильтрация:**
- `GET /api/news/?is_no_news_found=true` - получить только записи "новостей не найдено"
- `GET /api/news/?is_no_news_found=false` - получить только реальные новости
- `GET /api/news/` - получить все новости (по умолчанию `is_no_news_found=false` для реальных новостей)

**Удаление:**
- `DELETE /api/news/{id}/` - удалить конкретную новость (требует авторизации администратора)

**Комбинированная фильтрация:**
- Можно комбинировать с другими фильтрами: `?is_no_news_found=true&status=draft`

## Требования к реализации

### 1. Визуальное отображение

**В списке новостей:**
- Записи с `is_no_news_found=true` должны визуально отличаться от обычных новостей
- Рекомендуется использовать:
  - Отдельный цвет фона или границы
  - Иконку или бейдж с текстом "Новостей не найдено"
  - Приглушенный стиль (например, серый цвет текста)
- Заголовок таких записей обычно начинается с "Новостей от источника '...' не найдено"

**В детальном просмотре:**
- Показывать явную пометку, что это запись "новостей не найдено"
- Отображать ссылку на источник для ручной проверки администратором

### 2. Фильтрация в интерфейсе

**Варианты реализации:**

**Вариант A: Отдельная вкладка/секция**
- Создать отдельную вкладку "Новостей не найдено" в интерфейсе управления новостями
- При клике показывать только записи с `is_no_news_found=true`
- Показывать счетчик количества таких записей

**Вариант B: Фильтр в основном списке**
- Добавить переключатель/чекбокс "Показать записи 'новостей не найдено'"
- При включении показывать только такие записи
- При выключении скрывать их из списка

**Вариант C: Комбинированный подход**
- В основном списке по умолчанию скрывать записи "не найдено"
- Добавить отдельную секцию/вкладку для просмотра всех записей "не найдено"
- Показывать счетчик непросмотренных записей "не найдено"

**Рекомендуется:** Вариант C (комбинированный подход)

### 3. Массовое удаление

**Требования:**
- Функция должна быть доступна только администраторам
- Перед удалением должно быть подтверждение с указанием количества записей
- После удаления должен обновляться список новостей
- Обработка ошибок при удалении (если какая-то запись не удалилась)

**Сценарий использования:**
1. Администратор просматривает список записей "новостей не найдено"
2. Проверяет источники (кликая по ссылкам)
3. После проверки нажимает кнопку "Удалить все проверенные записи 'не найдено'"
4. Подтверждает действие
5. Система удаляет все записи с `is_no_news_found=true` и `status='draft'`
6. Показывает результат операции

**Дополнительные возможности:**
- Возможность выборочного удаления (чекбоксы для каждой записи)
- Фильтр по дате создания (удалять только старые записи)
- Фильтр по статусу (удалять только черновики)

### 4. Статистика и индикаторы

**Рекомендуется добавить:**
- Счетчик записей "новостей не найдено" в заголовке раздела новостей
- Бейдж/индикатор, если есть непроверенные записи "не найдено"
- Возможность отметить записи как "проверенные" (опционально, через изменение статуса)

### 5. UX/UI требования

**Принципы:**
- Записи "новостей не найдено" не должны мешать работе с реальными новостями
- Должна быть возможность быстро переключиться между просмотром реальных новостей и записей "не найдено"
- Массовое удаление должно быть защищено от случайного нажатия (подтверждение, возможно ввод текста)
- После массового удаления показать уведомление с количеством удаленных записей

**Доступность:**
- Все действия должны быть доступны с клавиатуры
- Визуальные индикаторы должны быть понятны
- Текст подтверждения должен быть четким

## Технические детали

### Авторизация

Все операции удаления требуют:
- JWT токен администратора в заголовке `Authorization: Bearer {token}`
- Или сессионную авторизацию для администратора

### Обработка ошибок

**Необходимо обрабатывать:**
- Ошибки сети при запросах к API
- Ошибки авторизации (401, 403)
- Ошибки валидации (400)
- Частичное удаление (если некоторые записи не удалились)

**Рекомендуется:**
- Показывать понятные сообщения об ошибках
- Логировать ошибки для отладки
- Предоставлять возможность повторить операцию

### Производительность

**При массовом удалении:**
- Если записей много (более 50), рассмотреть пакетное удаление
- Показывать прогресс-бар при удалении большого количества записей
- Не блокировать интерфейс во время операции

## Интеграция с существующим функционалом

### Связь с другими фильтрами

Поле `is_no_news_found` должно работать совместно с существующими фильтрами:
- По статусу (`status=draft`, `status=published`)
- По дате создания
- По автору
- По языку источника

### Связь с поиском

При поиске по тексту записи "новостей не найдено" также должны находиться, но визуально отличаться в результатах.

## Тестирование

**Необходимо протестировать:**
1. Отображение записей "не найдено" в списке
2. Фильтрацию по `is_no_news_found`
3. Массовое удаление (1 запись, несколько записей, много записей)
4. Обработку ошибок при удалении
5. Обновление списка после удаления
6. Работу с комбинированными фильтрами
7. Авторизацию и права доступа

## Дополнительные рекомендации

### Опциональные улучшения

1. **Экспорт списка источников "не найдено":**
   - Возможность экспортировать список URL источников для дальнейшего анализа

2. **Группировка по источникам:**
   - Показывать, сколько раз по каждому источнику не было найдено новостей

3. **История удалений:**
   - Логировать, когда и какие записи "не найдено" были удалены

4. **Автоматическая очистка:**
   - Настройка автоматического удаления записей "не найдено" старше определенного периода

5. **Статистика по источникам:**
   - Показывать, какие источники чаще всего не возвращают новости

## Приоритеты реализации

**Высокий приоритет:**
1. Визуальное отображение записей "не найдено"
2. Фильтрация в списке новостей
3. Массовое удаление с подтверждением

**Средний приоритет:**
4. Счетчик записей "не найдено"
5. Выборочное удаление
6. Обработка ошибок

**Низкий приоритет:**
7. Статистика по источникам
8. Экспорт списков
9. Автоматическая очистка

## Вопросы для уточнения

Если что-то неясно, уточните:
- Где именно в интерфейсе должен быть доступен функционал (в списке новостей, в отдельном разделе)?
- Нужна ли возможность восстановления удаленных записей?
- Нужна ли возможность пометить запись "не найдено" как проверенную без удаления?
- Какой максимальный размер списка записей "не найдено" ожидается?

## Контакты для вопросов

При возникновении вопросов по API или бизнес-логике обращайтесь к backend разработчику.

---

**Дата создания задания:** 2025-01-07  
**Версия API:** Текущая (поле `is_no_news_found` доступно во всех версиях)
